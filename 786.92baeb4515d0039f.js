"use strict";(self.webpackChunkawesome_components=self.webpackChunkawesome_components||[]).push([[786],{3786:(X,T,i)=>{i.r(T),i.d(T,{ReactiveStateModule:()=>G});var c=i(6895),d=i(3060),Z=i(8675),l=i(4004),x=i(9841),r=(()=>{return(a=r||(r={})).LASTNAME="lastName",a.FIRSTNAME="firstName",a.COMPANY="company",r;var a})(),t=i(4650),y=i(1135),f=i(1005),m=i(8505),h=i(3900),g=i(5698),C=i(2340),N=i(529);let v=(()=>{class a{constructor(e){this.http=e,this._loading$=new y.X(!1),this._candidates$=new y.X([]),this.lastCandidatesLoad=0}get loading$(){return this._loading$.asObservable()}get candidates$(){return this._candidates$.asObservable()}setLoadingStatus(e){this._loading$.next(e)}getCandidatesFromServer(){Date.now()-this.lastCandidatesLoad<=3e5||(this.setLoadingStatus(!0),this.http.get(`${C.N.apiUrl}/candidates`).pipe((0,f.g)(1e3),(0,m.b)(e=>{this.lastCandidatesLoad=Date.now(),this._candidates$.next(e),this.setLoadingStatus(!1)})).subscribe())}getCandidateById(e){return 0===this.lastCandidatesLoad&&this.getCandidatesFromServer(),this.candidates$.pipe((0,l.U)(n=>n.filter(s=>s.id===e)[0]))}refuseCandidate(e){this.setLoadingStatus(!0),this.http.delete(`${C.N.apiUrl}/candidates/${e}`).pipe((0,f.g)(1e3),(0,h.w)(()=>this.candidates$),(0,g.q)(1),(0,l.U)(n=>n.filter(s=>s.id!==e)),(0,m.b)(n=>{this._candidates$.next(n),this.setLoadingStatus(!1)})).subscribe()}hireCandidate(e){this.candidates$.pipe((0,g.q)(1),(0,l.U)(n=>n.map(s=>s.id===e?{...s,company:"SnapFace Ltd"}:s)),(0,m.b)(n=>{this._candidates$.next(n)}),(0,f.g)(1e3),(0,h.w)(n=>this.http.patch(`${C.N.apiUrl}/candidates/${e}`,n.find(s=>s.id===e)))).subscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(N.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})();var u=i(4006),p=i(3546),S=i(4633),A=i(3238),O=i(7392),$=i(9549),b=i(4144),L=i(1572),U=i(3035);function M(a,o){if(1&a&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function F(a,o){1&a&&t._UZ(0,"mat-spinner")}function J(a,o){if(1&a&&(t.TgZ(0,"a",9),t._UZ(1,"img",10),t.TgZ(2,"h3",11),t._uU(3),t.qZA(),t.TgZ(4,"p",11),t._uU(5),t.qZA()()),2&a){const e=o.$implicit;t.Q6J("routerLink",e.id.toString()),t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH)("alt",e.lastName),t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(2),t.AsE("",e.job," chez ",e.company,"")}}function I(a,o){if(1&a&&(t.TgZ(0,"mat-nav-list"),t.YNc(1,J,6,7,"a",8),t.qZA()),2&a){const e=o.ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}let R=(()=>{class a{constructor(e,n){this.candidateService=e,this.formBuilder=n}ngOnInit(){this.initForms(),this.initObervable(),this.candidateService.getCandidatesFromServer()}initObervable(){this.loading$=this.candidateService.loading$;const e=this.searchCtrl.valueChanges.pipe((0,Z.O)(this.searchCtrl.value),(0,l.U)(s=>s.toLowerCase())),n=this.searchTypeCtrl.valueChanges.pipe((0,Z.O)(this.searchTypeCtrl.value));this.candidates$=(0,x.a)([e,n,this.candidateService.candidates$]).pipe((0,l.U)(([s,z,w])=>w.filter(D=>D[z].toLowerCase().includes(s))))}initForms(){this.searchCtrl=this.formBuilder.control(""),this.searchTypeCtrl=this.formBuilder.control(r.LASTNAME),this.searchTypeOptions=[{value:r.LASTNAME,label:"Nom"},{value:r.FIRSTNAME,label:"Pr\xe9nom"},{value:r.COMPANY,label:"Entreprise"}]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v),t.Y36(u.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-candidate-list"]],decls:16,vars:9,consts:[[1,"form"],["appearance","fill"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text",3,"formControl"],["matSuffix",""],[4,"ngIf"],[3,"value"],["mat-list-item","",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["mat-list-avatar","",3,"src","alt"],["mat-line",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3,"Candidats"),t.qZA(),t.TgZ(4,"div",0)(5,"mat-form-field",1)(6,"mat-select",2),t.YNc(7,M,2,2,"mat-option",3),t.qZA()(),t.TgZ(8,"mat-form-field",1),t._UZ(9,"input",4),t.TgZ(10,"mat-icon",5),t._uU(11,"search"),t.qZA()()()(),t.YNc(12,F,1,0,"mat-spinner",6),t.ALo(13,"async"),t.YNc(14,I,2,1,"mat-nav-list",6),t.ALo(15,"async"),t.qZA()),2&e&&(t.xp6(6),t.Q6J("formControl",n.searchTypeCtrl),t.xp6(1),t.Q6J("ngForOf",n.searchTypeOptions),t.xp6(2),t.Q6J("formControl",n.searchCtrl),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,5,n.loading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,7,n.candidates$)))},dependencies:[c.sg,c.O5,d.yS,p.a8,p.C1,p.n5,S.Hk,S.Tg,S.eA,A.X2,O.Hw,$.KE,$.R9,b.Nt,L.Ou,U.gD,A.ey,u.Fj,u.JJ,u.oH,c.Ov],styles:["mat-card-title-group[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.form[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center}mat-form-field[_ngcontent-%COMP%]{margin:0 10px}"],changeDetection:0}),a})();var B=i(4859);function E(a,o){if(1&a&&(t.ynx(0),t._UZ(1,"img",3),t.TgZ(2,"div",4)(3,"h1"),t._uU(4),t.qZA(),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.qZA()(),t.BQk()),2&a){const e=o.ngIf;t.xp6(1),t.Q6J("src",e.imageUrl,t.LSH)("alt",e.firstName+" "+e.lastName),t.xp6(3),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(2),t.AsE("",e.job," chez ",e.company,""),t.xp6(2),t.hij("Contact : ",e.email,"")}}function Y(a,o){1&a&&t._UZ(0,"mat-spinner")}function Q(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onHire())}),t._uU(2," Embaucher"),t.qZA(),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onRefuse())}),t._uU(4," Refuser "),t.qZA()(),t.TgZ(5,"button",8),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onGoBack())}),t._uU(6," Retour "),t.qZA()}}const H=[{path:"candidates",component:R},{path:"candidates/:id",component:(()=>{class a{constructor(e,n,s){this.route=e,this.candidateService=n,this.router=s}ngOnInit(){this.initObservables()}initObservables(){this.loading$=this.candidateService.loading$,this.candidate$=this.route.params.pipe((0,h.w)(e=>this.candidateService.getCandidateById(+e.id)))}onHire(){this.candidate$.pipe((0,g.q)(1),(0,m.b)(e=>{e&&this.candidateService.hireCandidate(e.id),this.onGoBack()})).subscribe()}onRefuse(){this.candidate$.pipe((0,g.q)(1),(0,m.b)(e=>{e&&this.candidateService.refuseCandidate(e.id),this.onGoBack()})).subscribe()}onGoBack(){this.router.navigateByUrl("/reactive-state/candidates")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.gz),t.Y36(v),t.Y36(d.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-single-candidate"]],decls:8,vars:7,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["buttons",""],[3,"src","alt"],[1,"employee-info"],[1,"action-buttons"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-card"),t.YNc(1,E,9,7,"ng-container",0),t.ALo(2,"async"),t.TgZ(3,"mat-card-actions"),t.YNc(4,Y,1,0,"mat-spinner",1),t.ALo(5,"async"),t.YNc(6,Q,7,0,"ng-template",null,2,t.W1O),t.qZA()()),2&e){const s=t.MAs(7);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,3,n.candidate$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,5,n.loading$))("ngIfElse",s)}},dependencies:[c.O5,p.a8,p.hq,B.lW,L.Ou,c.Ov],styles:["mat-card[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{border-radius:50%}button[_ngcontent-%COMP%]{margin:5px}"],changeDetection:0}),a})()},{path:"",pathMatch:"full",redirectTo:"candidates"}];let j=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(H),d.Bz]}),a})();var P=i(7710);let G=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[v],imports:[c.ez,j,P.m]}),a})()}}]);